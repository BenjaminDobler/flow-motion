<svg style="position: absolute; pointer-events: none; left: 0; top: 0" width="100%" height="100%">
    @for (line of horizontalLines(); track $index) {
        <line [attr.x1]="line.from.x" [attr.x2]="line.to.x" [attr.y1]="line.from.y" [attr.y2]="line.to.y" stroke="#343434" stroke-width="1"></line>
    }

    @for (line of verticalLines(); track $index) {
        <line [attr.x1]="line.from.x" [attr.x2]="line.to.x" [attr.y1]="line.from.y" [attr.y2]="line.to.y" stroke="#343434" stroke-width="1"></line>
    }
    @for (point of points(); track $index) {
        <circle style="pointer-events: all" (click)="setActivePoint(point)" r="5" fill="#578FCA" [attr.cx]="point.x" [attr.cy]="point.y"></circle>
    }

    @if (activePoint) {
        <circle r="7" fill="#578FCA" [attr.cx]="activePoint.x" [attr.cy]="activePoint.y"></circle>
        @for (p of activePoint.adjacent; track $index) {
            <circle r="8" stroke-width="4" fill="transparent" stroke="#F5F0CD" [attr.cx]="p.x" [attr.cy]="p.y"></circle>
        }
    }

    @if(startPoint) {
        <circle r="8" stroke-width="4" fill="red" stroke="#F5F0CD" [attr.cx]="startPoint.x" [attr.cy]="startPoint.y"></circle>

    }



    <path [attr.d]="resultPath()" stroke="#fff" stroke-width="3" fill="none" ></path>
</svg>

<div bondcontainer class="container" #p1="bondcontainer" positioning="transform" style="position: absolute; width: 200px; height: 200px; background: #3674b5"></div>

<div bondcontainer class="container" #p2="bondcontainer" positioning="transform" style="position: absolute; width: 200px; height: 200px; background: #fada7a"></div>

<input [value]="rectMargin()" (change)="updateMargin($any($event.target).value)" type="number" min="0" max="100" />

<div style="position: absolute; right: 0; bottom: 0">
    @if(startPoint && endPoint) {
        <button (click)="startFromNode(startPoint)">start</button>
    }
    @if(activePoint) {
        <button (click)="setStartPoint(activePoint)">set start point</button>
        <button (click)="setEndPoint(activePoint)">set end point</button>
    }
</div>
