<div class="navigation">
  <div (click)="selected.set('properties')" [class.selected]="selected() === 'properties'">Properties</div>
  <div (click)="selected.set('children')" [class.selected]="selected() === 'children'">Children</div>
  <div (click)="selected.set('selection')" [class.selected]="selected() === 'children'">Selection</div>
</div>

<div class="content">
  @if (selected() === 'properties') {
    <div>
      <h3>Properties</h3>

      <form>
        <fieldset>
          <label>
            Stroke Color
            <input
              type="color"
              placeholder="Table Name"
              [value]="bondService.defaultProperties().stroke"
              (input)="updateProperty(bondService.defaultProperties, 'stroke', $any($event.target).value)"
            />
          </label>
          <label>
            Stroke Width
            <input type="number" [value]="bondService.defaultProperties().strokeWidth" (input)="updateProperty(bondService.defaultProperties, 'strokeWidth', $any($event.target).value)" />
          </label>

          <label>
            Stroke Dasharray
            <input type="string" [value]="bondService.defaultProperties().strokeDasharray" (input)="updateProperty(bondService.defaultProperties, 'strokeDasharray', $any($event.target).value)" />
          </label>
          <label>
            Connection Type
            <select (change)="updateProperty(bondService.defaultProperties, 'curveType', $any($event.target).value)" [value]="bondService.defaultProperties().curveType">
              <option value="bezier">bezier</option>
              <option value="multi-line">multi-line</option>
              <option value="straight">straight</option>
              <option value="orthogonal">orthogonal</option>
            </select>
          </label>

          <label>
            Snap
            <input name="snap" type="checkbox" [(ngModel)]="bondService.snap" />
          </label>

          <label>
            Snap Distance
            <input name="snapdist" type="number" [(ngModel)]="bondService.snapDistance" />
          </label>

          @if (bondService.defaultProperties().curveType === 'multi-line' || bondService.defaultProperties().curveType === 'orthogonal') {
            <label>
              Connection Smoothness
              <input type="number" [value]="bondService.defaultProperties().curveRadius" (input)="updateProperty(bondService.defaultProperties, 'curveRadius', $any($event.target).value)" />
            </label>
          }
        </fieldset>
      </form>

      <label>
        Animation Bubble Count
        <input type="number" [(ngModel)]="animationBubbleCount" />
      </label>

      <label>
        Animation Bubble Duration
        <input type="number" [(ngModel)]="animationBubbleDuration" />
      </label>

      <h3>Links</h3>
      @for (link of bondService.links(); track $index) {
        <div>
          {{ link().inputId }} > {{ link().outputId }}
          <div style="display: flex; align-items: center">
            <label>
              Animate
              <input type="checkbox" [value]="link().properties.animate" (change)="updateAnimateLink(link, $event)" />
            </label>
            <button (click)="bondService.removeLink(link)">Remove</button>
          </div>
        </div>
      }

      <br />
      <br />
      <input type="number" [value]="bondService.scale()" step="0.1" (change)="bondService.scale.set($any($event).target.value)" />
    </div>
  } @else if (selected() === 'children') {
    <!-- Children -->
    <div>
      <div>
        <h3>Targets</h3>
        @for (drag of bondService.dragElements(); track $index) {
          <div class="bond-item" [class.selected]="selectionManager.isSelected(drag)" (click)="toggleSelection(drag)" style="white-space: nowrap">
            ID: {{ drag.id() }} G: {{ drag.gX() }}x{{ drag.gY() }} L: {{ drag.x() }}x{{ drag.y() }}
          </div>
        }
      </div>
    </div>
  } @else if (selected() === 'selection') {
    <!-- Selection -->
    <div>
      <h3>Selection</h3>
      @for (selection of selectionManager.selectionTargets(); track $index) {
        <div class="bond-item" [class.selected]="selectionManager.isSelected(selection)" (click)="toggleSelection(selection)" style="white-space: nowrap">
          ID: {{ selection.id() }}
          <button (click)="selectionManager.unselect(selection)">Remove</button>
        </div>
      }

      <button (click)="selectionManager.alignHorizontal()">Align horizontal</button>
      <button (click)="selectionManager.alignVertical()">Align verticak</button>

      <button (click)="selectionManager.alignCenter()">Align center</button>
      <button (click)="selectionManager.alignVerticalCenter()">Align vertical center</button>
    </div>
  }
</div>
